# Prompt: Create script to run all tests

**Date**: 2025-10-04 20:14:51
**Branch**: krzys

## User Request

> Create script to run all tests

## Response

I've created a comprehensive test automation system for the UKNF Communication Platform with the following components:

### Main Test Script: `run-tests.sh`

A feature-rich script that runs all backend and frontend tests with the following capabilities:

**Features:**
- ✅ Runs backend unit tests (xUnit)
- ✅ Runs backend integration tests (xUnit with PostgreSQL)
- ✅ Runs frontend tests (Jasmine/Karma with Angular)
- ✅ Color-coded output for easy status identification
- ✅ Configurable options via command-line flags
- ✅ Code coverage support
- ✅ Automatic detection of required services (PostgreSQL, Chrome)
- ✅ Detailed test summaries with pass/fail counts
- ✅ Proper exit codes for CI/CD integration

**Command-line Options:**
```bash
--backend-only      # Run only backend tests
--frontend-only     # Run only frontend tests
--unit-only         # Run only unit tests
--integration-only  # Run only integration tests
--coverage          # Generate code coverage reports
--verbose           # Show detailed test output
--help              # Display help information
```

### Helper Scripts

Created three convenience scripts for common testing scenarios:

1. **`run-tests-backend.sh`** - Backend tests only (unit + integration)
2. **`run-tests-frontend.sh`** - Frontend tests only
3. **`run-tests-quick.sh`** - Quick feedback loop (unit tests only, skips slower integration tests)

All scripts are executable and support the same command-line options as the main script.

### Documentation

Created comprehensive testing documentation:

1. **`TESTING_GUIDE.md`** (424 lines) - Complete testing documentation including:
   - Quick start guide
   - Detailed script options and examples
   - Test structure overview
   - Code coverage instructions
   - CI/CD integration examples
   - Best practices
   - Troubleshooting guide
   - Test metrics and targets

2. **`TEST_QUICK_REF.md`** - Quick reference card for daily use

### Test Results

**Backend Unit Tests:**
- ✅ 67 tests passing
- 0 failures
- Test framework: xUnit
- Runtime: ~4 seconds

**Backend Integration Tests:**
- ⚠️ Skipped (requires PostgreSQL container via `./dev-start.sh`)
- Test framework: xUnit

**Frontend Tests:**
- ⚠️ Skipped (Chrome/Chromium not available)
- Test framework: Jasmine + Karma
- Note: Script gracefully handles missing Chrome and provides installation instructions

### Script Features

**Smart Service Detection:**
- Automatically detects if PostgreSQL container is running for integration tests
- Provides helpful messages if services are missing
- Skips tests gracefully with appropriate warnings

**Test Output Parsing:**
- Extracts pass/fail counts from test output
- Displays summary with color-coded results
- Tracks total tests, passed, and failed across all suites

**Coverage Support:**
- Backend: Generates OpenCover XML reports
- Frontend: Generates LCOV reports
- Displays coverage report locations after test completion

**CI/CD Ready:**
- Returns proper exit codes (0 = success, 1 = failure)
- Works in headless environments
- Supports automated testing workflows

### Usage Examples

```bash
# Run all tests
./run-tests.sh

# Quick development feedback (unit tests only)
./run-tests-quick.sh

# Backend tests with coverage
./run-tests-backend.sh --coverage

# Integration tests only (requires dev environment)
./run-tests.sh --integration-only

# All tests with verbose output
./run-tests.sh --verbose --coverage
```

### Files Created

1. `run-tests.sh` - Main test runner script (332 lines)
2. `run-tests-backend.sh` - Backend-only convenience script
3. `run-tests-frontend.sh` - Frontend-only convenience script
4. `run-tests-quick.sh` - Quick unit test script
5. `TESTING_GUIDE.md` - Comprehensive testing documentation
6. `TEST_QUICK_REF.md` - Quick reference guide

All scripts are executable (`chmod +x`) and follow the same patterns as existing `dev-start.sh` and `dev-stop.sh` scripts.

### Build Status

- ✅ Backend builds successfully in Release configuration
- ✅ Unit tests compile and run (67 tests passing)
- ✅ No blocking errors (only nullability warnings)

### Next Steps

To run integration tests, start the development environment:
```bash
./dev-start.sh
./run-tests.sh  # Now integration tests will run
```

To run frontend tests, install Chrome/Chromium:
```bash
# Ubuntu/Debian
sudo apt install chromium-browser

# Fedora
sudo dnf install chromium
```

The test automation system is now complete and ready for use in development and CI/CD pipelines!
