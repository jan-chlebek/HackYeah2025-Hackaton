<div class="wnioski-details-container" *ngIf="wniosek">
  <div class="header">
    <div class="header-content">
      <h1>{{ wniosek.title }}</h1>
      <p-tag 
        [value]="getStatusLabel(wniosek.status)" 
        [severity]="getStatusSeverity(wniosek.status)">
      </p-tag>
    </div>
    <div class="header-actions">
      <p-button 
        label="Wstecz" 
        icon="pi pi-arrow-left" 
        routerLink="/wnioski"
        styleClass="p-button-outlined">
      </p-button>
      <p-button 
        label="Zatwierdź" 
        icon="pi pi-check" 
        (onClick)="approveWniosek()"
        styleClass="p-button-success"
        *ngIf="wniosek.status !== 'approved' && wniosek.status !== 'rejected'">
      </p-button>
      <p-button 
        label="Odrzuć" 
        icon="pi pi-times" 
        (onClick)="rejectWniosek()"
        styleClass="p-button-danger"
        *ngIf="wniosek.status !== 'approved' && wniosek.status !== 'rejected'">
      </p-button>
    </div>
  </div>

  <div class="content-grid">
    <div class="main-content">
      <p-card header="Szczegóły wniosku" styleClass="details-card">
        <div class="detail-row">
          <span class="detail-label">ID wniosku:</span>
          <span class="detail-value">{{ wniosek.id }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Typ:</span>
          <span class="detail-value">{{ getTypeLabel(wniosek.type) }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Data złożenia:</span>
          <span class="detail-value">{{ wniosek.submittedDate | date: 'dd.MM.yyyy HH:mm' }}</span>
        </div>
        <div class="detail-row">
          <span class="detail-label">Złożony przez:</span>
          <span class="detail-value">{{ wniosek.submittedBy }}</span>
        </div>
      </p-card>

      <p-card header="Opis wniosku" styleClass="description-card">
        <p>{{ wniosek.description }}</p>
      </p-card>

      <p-card header="Uzasadnienie" styleClass="justification-card" *ngIf="wniosek.justification">
        <p>{{ wniosek.justification }}</p>
      </p-card>

      <p-card header="Wnioskowane uprawnienia" styleClass="access-card" *ngIf="wniosek.requestedAccess && wniosek.requestedAccess.length > 0">
        <ul class="access-list">
          <li *ngFor="let access of wniosek.requestedAccess">
            <i class="pi pi-check-circle"></i>
            {{ access }}
          </li>
        </ul>
      </p-card>
    </div>

    <div class="sidebar-content">
      <p-card header="Historia zmian" styleClass="timeline-card">
        <p-timeline [value]="wniosek.timeline" align="left">
          <ng-template pTemplate="content" let-event>
            <div class="timeline-item">
              <div class="timeline-status">{{ event.status }}</div>
              <div class="timeline-date">{{ event.date | date: 'dd.MM.yyyy HH:mm' }}</div>
              <div class="timeline-user">{{ event.user }}</div>
              <div class="timeline-comment" *ngIf="event.comment">{{ event.comment }}</div>
            </div>
          </ng-template>
        </p-timeline>
      </p-card>
    </div>
  </div>
</div>
